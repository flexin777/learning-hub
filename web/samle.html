<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>Test</title>
</head>
<body>
<H1 id = "hed"></H1>
<form>
    <input id = "login">
    <br><br>
    <input id = pass>
    <br><br>
    <input type="button" id = submit value="submit" onclick="submitHandler()">
</form>
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script>
    function User (login, pass) {
        this.login = login;
        this.pass = pass;
        this.toString = function(){
            return "login: " + login + " pass: " + pass;
        }
    }

    function UserResponse (desription, imagePath) {
        this.description = desription;
        this.imagePath = imagePath;
        this.toString = function(){
            return "description: " + desription + " imagePath: " + imagePath;
        }
    }

    /*$( document ).ajaxError(function() {
        //$( ".log" ).text( "Triggered ajaxError handler." );
        document.write("ajax error")
        alert("hkfsjfd");
    });*/

    function submitHandler(){
        var usr = new User(document.getElementById("login").value, document.getElementById("pass").value);
        var str = JSON.stringify(usr);
        //document.write(usr);
        //document.write("<br>")
        //document.write(str);
        //var rez = jQuery.getJSON("http://localhost:8080/rest/user/postUser", str, function(data){alert(data)});
        var rez = $.ajax({
            data: str,
            type: "POST",
            url: "http://localhost:8080/rest/user/postUser",
            datatype: "json",
            //contentType: "text/html;charset=windows-1252"
            contentType: "application/json", //; charset=utf-8
            success: function(data) {
                //alert("Succes is OK");
                //var resp = JSON.parse(data.responseText);
                //alert(data.imagePath);
                //document.write(data.description + " " + data.imagePath + " ");
                $("#hed").append("description: " + data.description + " imagePath: " + data.imagePath);
            }//,
            /*statusCode: {
                200: function() {
                    //$("#response").html('Could not contact server.');
                    alert("Boom");
                    //document.write("All is OK ");
                }
            }*/

        //});
            //jsonpCallback: "localJsonpCallback"
            });
            /*done(function (response) {
                alert("Hot Handle");
                document.write("Cool");
                debugger;
            });
                /*.fail(function (jqxhr, textStatus, error) {
                    document.write("Cool");
                    alert("Hot Handle");
                    return false;
                });;/*.fail(function( data ) {
            var resp = JSON.parse(data);
            document.write(resp.description);
            document.write("<br>");
            document.write(resp.imagePath);
            //alert("Done")
            debugger;
            //var content = $( data ).find( '#content' );
            //$( "#result" ).empty().append( content );
             });*/
        //rez.success = function(){alert("Hot Handle");};
        //rez.done = function(response){alert("Hot Handle");};
        //rez.always = function(){alert("Hot Handle");};
        //rez.fail = function(){alert("Hot Handle");};
        //document.write(rez.responseType);
        //var resp = JSON.parse(rez.responseText);
        //document.write(resp.description);
        //document.write("Cant Handle");
        //debugger;
    }
    function localJsonpCallback(json) {
        if (!json.Error) {
            //$('#resultForm').submit();
            alert("Hot Handle");
        }
        else {
            alert("Hot Handle");
            //$('#loading').hide();
            //$('#userForm').show();
            alert(json.Message);
        }
    }

</script>
</body>
</html>